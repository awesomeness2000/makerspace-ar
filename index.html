<!DOCTYPE html>
<html>
  <head>
    <title>AR Printer Demo</title>
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js"></script>
  </head>

  <body style="margin: 0; overflow: hidden;">
    <a-scene embedded arjs="trackingMethod: best; sourceType: webcam; detectionMode: mono; patternRatio: 0.5;">
      
      <a-marker preset="hiro">

        <a-entity
          gltf-model="url(assets/printer-v1.glb)"
          position="0 0.2 0"
          rotation="0 0 0"
          scale="0.005 0.005 0.005">
        </a-entity>

        <a-text
          value="3D Printer"
          position="0 0.8 0"
          align="center"
          color="yellow">
        </a-text>

    
        <a-entity
          id="infoButton"
          geometry="primitive: plane; height: 0.25; width: 0.9"
          material="color: orange"
          position="0 1.0 0.95"
          text="value: How to use; align: center; color: black; width: 3"
          class="clickable"
          info-button-listener>
        </a-entity>

    
        <a-plane
          id="infoPanel"
          position="0 1.5 0"
          width="2"
          height="0.9"
          material="color: #222; opacity: 0.9"
          visible="false">
        </a-plane>

        <a-text
          id="infoPanelText"
          value="Step 1: Turn on the printer.\nStep 2: Load filament.\nStep 3: Start your print from the SD card."
          position="0 1.5 0.01"
          align="center"
          color="#ffffff"
          width="4"
          visible="false">
        </a-text>

      </a-marker>


      <a-entity
        camera
        cursor="rayOrigin: mouse; fuse: false"
        raycaster="objects: .clickable; far: 10;">
      </a-entity>
      <a-light type="ambient" color="#ffffff"></a-light>
      <a-light type="directional" position="1 1 1" intensity="1"></a-light>

    </a-scene>

    <script>
      AFRAME.registerComponent('info-button-listener', {
        init: function () {
          const panel = document.querySelector('#infoPanel');
          const panelText = document.querySelector('#infoPanelText');
          let visible = false;

          this.el.addEventListener('click', function () {
            visible = !visible;
            panel.setAttribute('visible', visible);
            panelText.setAttribute('visible', visible);
          });
        }
      });
    </script>

  </body>
</html>
